#!/bin/sh

# If "$1" is not one of the known commands, assume install
case "$1" in
install|remove|purge|hold|unhold|markauto|unmarkauto|forbid-version|update|upgrade|safe-upgrade|full-upgrade|forget-new|search|show|clean|autoclean|changelog|download|reinstall|why|why-not)
	;;
	?*)
		set -- install "$@"
esac

have() {
	have=`which "$1" 2>/dev/null` && test -n "$have"
}

if [ 0 -eq $(id -u) ]; then
	if have apt-get || have aptitude; then
		"$have" "$@"
	fi
	if [ $# -eq 1 ] && [ x"$1" = xupdate ] && have apt-file; then
		apt-file update
	fi
elif have sudo || have s; then
	exec "$have" "$0" "$@"
else
	echo 'a requires s or sudo' >&2
	exit 1
fi
